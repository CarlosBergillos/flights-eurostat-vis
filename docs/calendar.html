<!-- Code from d3v4-graph-gallery.com -->
<!DOCTYPE html>
<meta charset="utf-8">

<!-- Load d3v4.js -->
<!--<script src="libs/d3v4.v4.min.js"></script>-->

<!-- Create a div where the graph will take place -->
<div id="cal-heatmap"></div>


<script>

var cal = new CalHeatMap();
cal.init({
  id: "cal-heatmap",
  data: "/data/evolution/LEBL.csv",
  dataType: "csv",
  domain : "year",
  subDomain : "x_month",
  start: new Date(2001, 0),
  range: 18,
  legend: [1000000, 1500000, 2000000, 2500000],
  domainGutter: 40,
  afterLoadData: function(d) {
		var stats = {};
		for (var i = 0, total = d.length; i < total; i++ ) {
      key = d3v4.timeParse("%YM%m")(d[i].timeperiod)/1000;
      value = parseInt(d[i].pax);
			stats[key] = value;
		}
    return stats;
  }
});

<!--// set the dimensions and margins of the graph-->
<!--var divWidth = $("#lowerContent").width();-->
<!--var divHeight = $("#lowerContent").height();-->

<!--var margin = {top: 10, right: 60, bottom: 30, left: 30},-->-->
<!--    width = divWidth - margin.left - margin.right,-->
<!--    height = divHeight - margin.top - margin.bottom;-->

<!--// append the svg object to the body of the page-->-->
<!--var svg = d3v4.select("#my_dataviz")-->
<!--  .append("svg")-->
<!--    .attr("width", width + margin.left + margin.right)-->
<!--    .attr("height", height + margin.top + margin.bottom)-->
<!--  .append("g")-->
<!--    .attr("transform",-->
<!--          "translate(" + margin.left + "," + margin.top + ")");-->

<!--var first = true;-->-->
<!--var avgLine, currYearRect, currYearLineL, currYearLineR;-->

function drawBarplot(data){

}

function parseBarplotInfo(d){
  return { date : d3v4.timeParse("%YM%m")(d.timeperiod), value : +d[current_unit] }
}

function updateBarsInfo(airport){
  d3v4.csv("data/evolution/"+airport+".csv", parseBarplotInfo, drawBarplot);
}

updateBarsInfo(current_airport)

</script>
