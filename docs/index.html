<html>
<script src="libs/d3.v3.5.17.min.js"></script>
<script src="libs/topojson.3.0.2.min.js"></script>
<script src="libs/datamaps.world.hires.min.js"></script>

<body bgcolor="#182633">
    <div id="container" style="position: relative; width: 100%; height: 100%;"></div>
</body>
<script>

function jsonDataArray(array) {
    var headers = array[0].split(',');
    var jsonData = [];
    for (var i = 1, length = array.length; i < length; i++ ){
      var row = array[i].split(',');
      var data = {};
      for ( var x = 0; x < row.length; x++ ){
        data[headers[x]] = row[x];
      }
      jsonData.push(data);
    }
    return jsonData;
}

var map = new Datamap({
    element: document.getElementById('container'),
    geographyConfig: {
        popupOnHover: true,
        highlightOnHover: true,
        borderColor: '#444',
        borderWidth: 0.5,
    },
    fills: {
        defaultFill: '#131522'
    },
    responsive: false
});

map.arc([
    {origin: {
        latitude: 39.861667,
        longitude: -104.673056
    },
    destination: {
        latitude: 35.877778,
        longitude: 8.7875
    },
    options: {
        strokeWidth: 2,
        strokeColor: 'rgba(100, 10, 200, 0.4)',
    }},
    {origin: {
        latitude: 30.194444,
        longitude: -97.67
    },
    destination: {
        latitude: 25.793333,
        longitude: 23.290556
    },
    options: {
        strokeWidth: 20,
        strokeColor: 'rgba(100, 10, 200, 0.4)',
    }}
], {greatArc: true,animationSpeed: 600});


fetch('public/data/LEBL_destinations_pax_2018.csv', {mode: 'no-cors'})
  .then(response => response.text())
  .then(text => console.log(text))

</script>
<html>
